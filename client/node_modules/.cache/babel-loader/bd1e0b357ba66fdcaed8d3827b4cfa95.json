{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/emad/Desktop/My Website 2022/emadsaeed.com/client/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.alterHsl = exports.drawEllipse = exports.drawParticlePlugin = exports.drawPlugin = exports.drawShapeAfterEffect = exports.drawShape = exports.drawParticle = exports.drawGrabLine = exports.gradient = exports.drawConnectLine = exports.drawLinkTriangle = exports.drawLinkLine = exports.clear = exports.paintBase = void 0;\n\nvar NumberUtils_1 = require(\"./NumberUtils\");\n\nvar ColorUtils_1 = require(\"./ColorUtils\");\n\nvar Enums_1 = require(\"../Enums\");\n\nfunction drawLine(context, begin, end) {\n  context.beginPath();\n  context.moveTo(begin.x, begin.y);\n  context.lineTo(end.x, end.y);\n  context.closePath();\n}\n\nfunction drawTriangle(context, p1, p2, p3) {\n  context.beginPath();\n  context.moveTo(p1.x, p1.y);\n  context.lineTo(p2.x, p2.y);\n  context.lineTo(p3.x, p3.y);\n  context.closePath();\n}\n\nfunction paintBase(context, dimension, baseColor) {\n  context.save();\n  context.fillStyle = baseColor !== null && baseColor !== void 0 ? baseColor : \"rgba(0,0,0,0)\";\n  context.fillRect(0, 0, dimension.width, dimension.height);\n  context.restore();\n}\n\nexports.paintBase = paintBase;\n\nfunction clear(context, dimension) {\n  context.clearRect(0, 0, dimension.width, dimension.height);\n}\n\nexports.clear = clear;\n\nfunction drawLinkLine(context, width, begin, end, maxDistance, canvasSize, warp, backgroundMask, composite, colorLine, opacity, shadow) {\n  var drawn = false;\n\n  if ((0, NumberUtils_1.getDistance)(begin, end) <= maxDistance) {\n    drawLine(context, begin, end);\n    drawn = true;\n  } else if (warp) {\n    var pi1;\n    var pi2;\n    var endNE = {\n      x: end.x - canvasSize.width,\n      y: end.y\n    };\n    var d1 = (0, NumberUtils_1.getDistances)(begin, endNE);\n\n    if (d1.distance <= maxDistance) {\n      var yi = begin.y - d1.dy / d1.dx * begin.x;\n      pi1 = {\n        x: 0,\n        y: yi\n      };\n      pi2 = {\n        x: canvasSize.width,\n        y: yi\n      };\n    } else {\n      var endSW = {\n        x: end.x,\n        y: end.y - canvasSize.height\n      };\n      var d2 = (0, NumberUtils_1.getDistances)(begin, endSW);\n\n      if (d2.distance <= maxDistance) {\n        var _yi = begin.y - d2.dy / d2.dx * begin.x;\n\n        var xi = -_yi / (d2.dy / d2.dx);\n        pi1 = {\n          x: xi,\n          y: 0\n        };\n        pi2 = {\n          x: xi,\n          y: canvasSize.height\n        };\n      } else {\n        var endSE = {\n          x: end.x - canvasSize.width,\n          y: end.y - canvasSize.height\n        };\n        var d3 = (0, NumberUtils_1.getDistances)(begin, endSE);\n\n        if (d3.distance <= maxDistance) {\n          var _yi2 = begin.y - d3.dy / d3.dx * begin.x;\n\n          var _xi = -_yi2 / (d3.dy / d3.dx);\n\n          pi1 = {\n            x: _xi,\n            y: _yi2\n          };\n          pi2 = {\n            x: pi1.x + canvasSize.width,\n            y: pi1.y + canvasSize.height\n          };\n        }\n      }\n    }\n\n    if (pi1 && pi2) {\n      drawLine(context, begin, pi1);\n      drawLine(context, end, pi2);\n      drawn = true;\n    }\n  }\n\n  if (!drawn) {\n    return;\n  }\n\n  context.lineWidth = width;\n\n  if (backgroundMask) {\n    context.globalCompositeOperation = composite;\n  }\n\n  context.strokeStyle = (0, ColorUtils_1.getStyleFromRgb)(colorLine, opacity);\n\n  if (shadow.enable) {\n    var shadowColor = (0, ColorUtils_1.colorToRgb)(shadow.color);\n\n    if (shadowColor) {\n      context.shadowBlur = shadow.blur;\n      context.shadowColor = (0, ColorUtils_1.getStyleFromRgb)(shadowColor);\n    }\n  }\n\n  context.stroke();\n}\n\nexports.drawLinkLine = drawLinkLine;\n\nfunction drawLinkTriangle(context, pos1, pos2, pos3, backgroundMask, composite, colorTriangle, opacityTriangle) {\n  drawTriangle(context, pos1, pos2, pos3);\n\n  if (backgroundMask) {\n    context.globalCompositeOperation = composite;\n  }\n\n  context.fillStyle = (0, ColorUtils_1.getStyleFromRgb)(colorTriangle, opacityTriangle);\n  context.fill();\n}\n\nexports.drawLinkTriangle = drawLinkTriangle;\n\nfunction drawConnectLine(context, width, lineStyle, begin, end) {\n  context.save();\n  drawLine(context, begin, end);\n  context.lineWidth = width;\n  context.strokeStyle = lineStyle;\n  context.stroke();\n  context.restore();\n}\n\nexports.drawConnectLine = drawConnectLine;\n\nfunction gradient(context, p1, p2, opacity) {\n  var gradStop = Math.floor(p2.getRadius() / p1.getRadius());\n  var color1 = p1.getFillColor();\n  var color2 = p2.getFillColor();\n\n  if (!color1 || !color2) {\n    return;\n  }\n\n  var sourcePos = p1.getPosition();\n  var destPos = p2.getPosition();\n  var midRgb = (0, ColorUtils_1.colorMix)(color1, color2, p1.getRadius(), p2.getRadius());\n  var grad = context.createLinearGradient(sourcePos.x, sourcePos.y, destPos.x, destPos.y);\n  grad.addColorStop(0, (0, ColorUtils_1.getStyleFromHsl)(color1, opacity));\n  grad.addColorStop(gradStop > 1 ? 1 : gradStop, (0, ColorUtils_1.getStyleFromRgb)(midRgb, opacity));\n  grad.addColorStop(1, (0, ColorUtils_1.getStyleFromHsl)(color2, opacity));\n  return grad;\n}\n\nexports.gradient = gradient;\n\nfunction drawGrabLine(context, width, begin, end, colorLine, opacity) {\n  context.save();\n  drawLine(context, begin, end);\n  context.strokeStyle = (0, ColorUtils_1.getStyleFromRgb)(colorLine, opacity);\n  context.lineWidth = width;\n  context.stroke();\n  context.restore();\n}\n\nexports.drawGrabLine = drawGrabLine;\n\nfunction drawParticle(container, context, particle, delta, fillColorValue, strokeColorValue, backgroundMask, composite, radius, opacity, shadow, gradient) {\n  var _a, _b, _c, _d, _e, _f;\n\n  var pos = particle.getPosition();\n  var tiltOptions = particle.options.tilt;\n  var rollOptions = particle.options.roll;\n  context.save();\n\n  if (tiltOptions.enable || rollOptions.enable) {\n    var roll = rollOptions.enable && particle.roll;\n    var tilt = tiltOptions.enable && particle.tilt;\n    var rollHorizontal = roll && (rollOptions.mode === Enums_1.RollMode.horizontal || rollOptions.mode === Enums_1.RollMode.both);\n    var rollVertical = roll && (rollOptions.mode === Enums_1.RollMode.vertical || rollOptions.mode === Enums_1.RollMode.both);\n    context.setTransform(rollHorizontal ? Math.cos(particle.roll.angle) : 1, tilt ? Math.cos(particle.tilt.value) * particle.tilt.cosDirection : 0, tilt ? Math.sin(particle.tilt.value) * particle.tilt.sinDirection : 0, rollVertical ? Math.sin(particle.roll.angle) : 1, pos.x, pos.y);\n  } else {\n    context.translate(pos.x, pos.y);\n  }\n\n  context.beginPath();\n  var angle = ((_b = (_a = particle.rotate) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : 0) + (particle.options.rotate.path ? particle.velocity.angle : 0);\n\n  if (angle !== 0) {\n    context.rotate(angle);\n  }\n\n  if (backgroundMask) {\n    context.globalCompositeOperation = composite;\n  }\n\n  var shadowColor = particle.shadowColor;\n\n  if (shadow.enable && shadowColor) {\n    context.shadowBlur = shadow.blur;\n    context.shadowColor = (0, ColorUtils_1.getStyleFromRgb)(shadowColor);\n    context.shadowOffsetX = shadow.offset.x;\n    context.shadowOffsetY = shadow.offset.y;\n  }\n\n  if (gradient) {\n    var gradientAngle = gradient.angle.value;\n    var fillGradient = gradient.type === Enums_1.GradientType.radial ? context.createRadialGradient(0, 0, 0, 0, 0, radius) : context.createLinearGradient(Math.cos(gradientAngle) * -radius, Math.sin(gradientAngle) * -radius, Math.cos(gradientAngle) * radius, Math.sin(gradientAngle) * radius);\n\n    var _iterator = _createForOfIteratorHelper(gradient.colors),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var color = _step.value;\n        fillGradient.addColorStop(color.stop, (0, ColorUtils_1.getStyleFromHsl)({\n          h: color.value.h.value,\n          s: color.value.s.value,\n          l: color.value.l.value\n        }, (_d = (_c = color.opacity) === null || _c === void 0 ? void 0 : _c.value) !== null && _d !== void 0 ? _d : opacity));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    context.fillStyle = fillGradient;\n  } else {\n    if (fillColorValue) {\n      context.fillStyle = fillColorValue;\n    }\n  }\n\n  var stroke = particle.stroke;\n  context.lineWidth = (_e = particle.strokeWidth) !== null && _e !== void 0 ? _e : 0;\n\n  if (strokeColorValue) {\n    context.strokeStyle = strokeColorValue;\n  }\n\n  drawShape(container, context, particle, radius, opacity, delta);\n\n  if (((_f = stroke === null || stroke === void 0 ? void 0 : stroke.width) !== null && _f !== void 0 ? _f : 0) > 0) {\n    context.stroke();\n  }\n\n  if (particle.close) {\n    context.closePath();\n  }\n\n  if (particle.fill) {\n    context.fill();\n  }\n\n  context.restore();\n  context.save();\n\n  if (tiltOptions.enable && particle.tilt) {\n    context.setTransform(1, Math.cos(particle.tilt.value) * particle.tilt.cosDirection, Math.sin(particle.tilt.value) * particle.tilt.sinDirection, 1, pos.x, pos.y);\n  } else {\n    context.translate(pos.x, pos.y);\n  }\n\n  if (angle !== 0) {\n    context.rotate(angle);\n  }\n\n  if (backgroundMask) {\n    context.globalCompositeOperation = composite;\n  }\n\n  drawShapeAfterEffect(container, context, particle, radius, opacity, delta);\n  context.restore();\n}\n\nexports.drawParticle = drawParticle;\n\nfunction drawShape(container, context, particle, radius, opacity, delta) {\n  if (!particle.shape) {\n    return;\n  }\n\n  var drawer = container.drawers.get(particle.shape);\n\n  if (!drawer) {\n    return;\n  }\n\n  drawer.draw(context, particle, radius, opacity, delta, container.retina.pixelRatio);\n}\n\nexports.drawShape = drawShape;\n\nfunction drawShapeAfterEffect(container, context, particle, radius, opacity, delta) {\n  if (!particle.shape) {\n    return;\n  }\n\n  var drawer = container.drawers.get(particle.shape);\n\n  if (!(drawer === null || drawer === void 0 ? void 0 : drawer.afterEffect)) {\n    return;\n  }\n\n  drawer.afterEffect(context, particle, radius, opacity, delta, container.retina.pixelRatio);\n}\n\nexports.drawShapeAfterEffect = drawShapeAfterEffect;\n\nfunction drawPlugin(context, plugin, delta) {\n  if (!plugin.draw) {\n    return;\n  }\n\n  context.save();\n  plugin.draw(context, delta);\n  context.restore();\n}\n\nexports.drawPlugin = drawPlugin;\n\nfunction drawParticlePlugin(context, plugin, particle, delta) {\n  if (plugin.drawParticle !== undefined) {\n    context.save();\n    plugin.drawParticle(context, particle, delta);\n    context.restore();\n  }\n}\n\nexports.drawParticlePlugin = drawParticlePlugin;\n\nfunction drawEllipse(context, particle, fillColorValue, radius, opacity, width, rotation, start, end) {\n  var pos = particle.getPosition();\n\n  if (fillColorValue) {\n    context.strokeStyle = (0, ColorUtils_1.getStyleFromHsl)(fillColorValue, opacity);\n  }\n\n  if (width === 0) {\n    return;\n  }\n\n  context.lineWidth = width;\n  var rotationRadian = rotation * Math.PI / 180;\n  context.beginPath();\n  context.ellipse(pos.x, pos.y, radius / 2, radius * 2, rotationRadian, start, end);\n  context.stroke();\n}\n\nexports.drawEllipse = drawEllipse;\n\nfunction alterHsl(color, type, value) {\n  return {\n    h: color.h,\n    s: color.s,\n    l: color.l + (type === Enums_1.AlterType.darken ? -1 : 1) * value\n  };\n}\n\nexports.alterHsl = alterHsl;","map":{"version":3,"sources":["/Users/emad/Desktop/My Website 2022/emadsaeed.com/client/node_modules/tsparticles/Utils/CanvasUtils.js"],"names":["Object","defineProperty","exports","value","alterHsl","drawEllipse","drawParticlePlugin","drawPlugin","drawShapeAfterEffect","drawShape","drawParticle","drawGrabLine","gradient","drawConnectLine","drawLinkTriangle","drawLinkLine","clear","paintBase","NumberUtils_1","require","ColorUtils_1","Enums_1","drawLine","context","begin","end","beginPath","moveTo","x","y","lineTo","closePath","drawTriangle","p1","p2","p3","dimension","baseColor","save","fillStyle","fillRect","width","height","restore","clearRect","maxDistance","canvasSize","warp","backgroundMask","composite","colorLine","opacity","shadow","drawn","getDistance","pi1","pi2","endNE","d1","getDistances","distance","yi","dy","dx","endSW","d2","xi","endSE","d3","lineWidth","globalCompositeOperation","strokeStyle","getStyleFromRgb","enable","shadowColor","colorToRgb","color","shadowBlur","blur","stroke","pos1","pos2","pos3","colorTriangle","opacityTriangle","fill","lineStyle","gradStop","Math","floor","getRadius","color1","getFillColor","color2","sourcePos","getPosition","destPos","midRgb","colorMix","grad","createLinearGradient","addColorStop","getStyleFromHsl","container","particle","delta","fillColorValue","strokeColorValue","radius","_a","_b","_c","_d","_e","_f","pos","tiltOptions","options","tilt","rollOptions","roll","rollHorizontal","mode","RollMode","horizontal","both","rollVertical","vertical","setTransform","cos","angle","cosDirection","sin","sinDirection","translate","rotate","path","velocity","shadowOffsetX","offset","shadowOffsetY","gradientAngle","fillGradient","type","GradientType","radial","createRadialGradient","colors","stop","h","s","l","strokeWidth","close","shape","drawer","drawers","get","draw","retina","pixelRatio","afterEffect","plugin","undefined","rotation","start","rotationRadian","PI","ellipse","AlterType","darken"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.alterHsl = exports.drawEllipse = exports.drawParticlePlugin = exports.drawPlugin = exports.drawShapeAfterEffect = exports.drawShape = exports.drawParticle = exports.drawGrabLine = exports.gradient = exports.drawConnectLine = exports.drawLinkTriangle = exports.drawLinkLine = exports.clear = exports.paintBase = void 0;\nconst NumberUtils_1 = require(\"./NumberUtils\");\nconst ColorUtils_1 = require(\"./ColorUtils\");\nconst Enums_1 = require(\"../Enums\");\nfunction drawLine(context, begin, end) {\n    context.beginPath();\n    context.moveTo(begin.x, begin.y);\n    context.lineTo(end.x, end.y);\n    context.closePath();\n}\nfunction drawTriangle(context, p1, p2, p3) {\n    context.beginPath();\n    context.moveTo(p1.x, p1.y);\n    context.lineTo(p2.x, p2.y);\n    context.lineTo(p3.x, p3.y);\n    context.closePath();\n}\nfunction paintBase(context, dimension, baseColor) {\n    context.save();\n    context.fillStyle = baseColor !== null && baseColor !== void 0 ? baseColor : \"rgba(0,0,0,0)\";\n    context.fillRect(0, 0, dimension.width, dimension.height);\n    context.restore();\n}\nexports.paintBase = paintBase;\nfunction clear(context, dimension) {\n    context.clearRect(0, 0, dimension.width, dimension.height);\n}\nexports.clear = clear;\nfunction drawLinkLine(context, width, begin, end, maxDistance, canvasSize, warp, backgroundMask, composite, colorLine, opacity, shadow) {\n    let drawn = false;\n    if ((0, NumberUtils_1.getDistance)(begin, end) <= maxDistance) {\n        drawLine(context, begin, end);\n        drawn = true;\n    }\n    else if (warp) {\n        let pi1;\n        let pi2;\n        const endNE = {\n            x: end.x - canvasSize.width,\n            y: end.y,\n        };\n        const d1 = (0, NumberUtils_1.getDistances)(begin, endNE);\n        if (d1.distance <= maxDistance) {\n            const yi = begin.y - (d1.dy / d1.dx) * begin.x;\n            pi1 = { x: 0, y: yi };\n            pi2 = { x: canvasSize.width, y: yi };\n        }\n        else {\n            const endSW = {\n                x: end.x,\n                y: end.y - canvasSize.height,\n            };\n            const d2 = (0, NumberUtils_1.getDistances)(begin, endSW);\n            if (d2.distance <= maxDistance) {\n                const yi = begin.y - (d2.dy / d2.dx) * begin.x;\n                const xi = -yi / (d2.dy / d2.dx);\n                pi1 = { x: xi, y: 0 };\n                pi2 = { x: xi, y: canvasSize.height };\n            }\n            else {\n                const endSE = {\n                    x: end.x - canvasSize.width,\n                    y: end.y - canvasSize.height,\n                };\n                const d3 = (0, NumberUtils_1.getDistances)(begin, endSE);\n                if (d3.distance <= maxDistance) {\n                    const yi = begin.y - (d3.dy / d3.dx) * begin.x;\n                    const xi = -yi / (d3.dy / d3.dx);\n                    pi1 = { x: xi, y: yi };\n                    pi2 = { x: pi1.x + canvasSize.width, y: pi1.y + canvasSize.height };\n                }\n            }\n        }\n        if (pi1 && pi2) {\n            drawLine(context, begin, pi1);\n            drawLine(context, end, pi2);\n            drawn = true;\n        }\n    }\n    if (!drawn) {\n        return;\n    }\n    context.lineWidth = width;\n    if (backgroundMask) {\n        context.globalCompositeOperation = composite;\n    }\n    context.strokeStyle = (0, ColorUtils_1.getStyleFromRgb)(colorLine, opacity);\n    if (shadow.enable) {\n        const shadowColor = (0, ColorUtils_1.colorToRgb)(shadow.color);\n        if (shadowColor) {\n            context.shadowBlur = shadow.blur;\n            context.shadowColor = (0, ColorUtils_1.getStyleFromRgb)(shadowColor);\n        }\n    }\n    context.stroke();\n}\nexports.drawLinkLine = drawLinkLine;\nfunction drawLinkTriangle(context, pos1, pos2, pos3, backgroundMask, composite, colorTriangle, opacityTriangle) {\n    drawTriangle(context, pos1, pos2, pos3);\n    if (backgroundMask) {\n        context.globalCompositeOperation = composite;\n    }\n    context.fillStyle = (0, ColorUtils_1.getStyleFromRgb)(colorTriangle, opacityTriangle);\n    context.fill();\n}\nexports.drawLinkTriangle = drawLinkTriangle;\nfunction drawConnectLine(context, width, lineStyle, begin, end) {\n    context.save();\n    drawLine(context, begin, end);\n    context.lineWidth = width;\n    context.strokeStyle = lineStyle;\n    context.stroke();\n    context.restore();\n}\nexports.drawConnectLine = drawConnectLine;\nfunction gradient(context, p1, p2, opacity) {\n    const gradStop = Math.floor(p2.getRadius() / p1.getRadius());\n    const color1 = p1.getFillColor();\n    const color2 = p2.getFillColor();\n    if (!color1 || !color2) {\n        return;\n    }\n    const sourcePos = p1.getPosition();\n    const destPos = p2.getPosition();\n    const midRgb = (0, ColorUtils_1.colorMix)(color1, color2, p1.getRadius(), p2.getRadius());\n    const grad = context.createLinearGradient(sourcePos.x, sourcePos.y, destPos.x, destPos.y);\n    grad.addColorStop(0, (0, ColorUtils_1.getStyleFromHsl)(color1, opacity));\n    grad.addColorStop(gradStop > 1 ? 1 : gradStop, (0, ColorUtils_1.getStyleFromRgb)(midRgb, opacity));\n    grad.addColorStop(1, (0, ColorUtils_1.getStyleFromHsl)(color2, opacity));\n    return grad;\n}\nexports.gradient = gradient;\nfunction drawGrabLine(context, width, begin, end, colorLine, opacity) {\n    context.save();\n    drawLine(context, begin, end);\n    context.strokeStyle = (0, ColorUtils_1.getStyleFromRgb)(colorLine, opacity);\n    context.lineWidth = width;\n    context.stroke();\n    context.restore();\n}\nexports.drawGrabLine = drawGrabLine;\nfunction drawParticle(container, context, particle, delta, fillColorValue, strokeColorValue, backgroundMask, composite, radius, opacity, shadow, gradient) {\n    var _a, _b, _c, _d, _e, _f;\n    const pos = particle.getPosition();\n    const tiltOptions = particle.options.tilt;\n    const rollOptions = particle.options.roll;\n    context.save();\n    if (tiltOptions.enable || rollOptions.enable) {\n        const roll = rollOptions.enable && particle.roll;\n        const tilt = tiltOptions.enable && particle.tilt;\n        const rollHorizontal = roll && (rollOptions.mode === Enums_1.RollMode.horizontal || rollOptions.mode === Enums_1.RollMode.both);\n        const rollVertical = roll && (rollOptions.mode === Enums_1.RollMode.vertical || rollOptions.mode === Enums_1.RollMode.both);\n        context.setTransform(rollHorizontal ? Math.cos(particle.roll.angle) : 1, tilt ? Math.cos(particle.tilt.value) * particle.tilt.cosDirection : 0, tilt ? Math.sin(particle.tilt.value) * particle.tilt.sinDirection : 0, rollVertical ? Math.sin(particle.roll.angle) : 1, pos.x, pos.y);\n    }\n    else {\n        context.translate(pos.x, pos.y);\n    }\n    context.beginPath();\n    const angle = ((_b = (_a = particle.rotate) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : 0) + (particle.options.rotate.path ? particle.velocity.angle : 0);\n    if (angle !== 0) {\n        context.rotate(angle);\n    }\n    if (backgroundMask) {\n        context.globalCompositeOperation = composite;\n    }\n    const shadowColor = particle.shadowColor;\n    if (shadow.enable && shadowColor) {\n        context.shadowBlur = shadow.blur;\n        context.shadowColor = (0, ColorUtils_1.getStyleFromRgb)(shadowColor);\n        context.shadowOffsetX = shadow.offset.x;\n        context.shadowOffsetY = shadow.offset.y;\n    }\n    if (gradient) {\n        const gradientAngle = gradient.angle.value;\n        const fillGradient = gradient.type === Enums_1.GradientType.radial\n            ? context.createRadialGradient(0, 0, 0, 0, 0, radius)\n            : context.createLinearGradient(Math.cos(gradientAngle) * -radius, Math.sin(gradientAngle) * -radius, Math.cos(gradientAngle) * radius, Math.sin(gradientAngle) * radius);\n        for (const color of gradient.colors) {\n            fillGradient.addColorStop(color.stop, (0, ColorUtils_1.getStyleFromHsl)({\n                h: color.value.h.value,\n                s: color.value.s.value,\n                l: color.value.l.value,\n            }, (_d = (_c = color.opacity) === null || _c === void 0 ? void 0 : _c.value) !== null && _d !== void 0 ? _d : opacity));\n        }\n        context.fillStyle = fillGradient;\n    }\n    else {\n        if (fillColorValue) {\n            context.fillStyle = fillColorValue;\n        }\n    }\n    const stroke = particle.stroke;\n    context.lineWidth = (_e = particle.strokeWidth) !== null && _e !== void 0 ? _e : 0;\n    if (strokeColorValue) {\n        context.strokeStyle = strokeColorValue;\n    }\n    drawShape(container, context, particle, radius, opacity, delta);\n    if (((_f = stroke === null || stroke === void 0 ? void 0 : stroke.width) !== null && _f !== void 0 ? _f : 0) > 0) {\n        context.stroke();\n    }\n    if (particle.close) {\n        context.closePath();\n    }\n    if (particle.fill) {\n        context.fill();\n    }\n    context.restore();\n    context.save();\n    if (tiltOptions.enable && particle.tilt) {\n        context.setTransform(1, Math.cos(particle.tilt.value) * particle.tilt.cosDirection, Math.sin(particle.tilt.value) * particle.tilt.sinDirection, 1, pos.x, pos.y);\n    }\n    else {\n        context.translate(pos.x, pos.y);\n    }\n    if (angle !== 0) {\n        context.rotate(angle);\n    }\n    if (backgroundMask) {\n        context.globalCompositeOperation = composite;\n    }\n    drawShapeAfterEffect(container, context, particle, radius, opacity, delta);\n    context.restore();\n}\nexports.drawParticle = drawParticle;\nfunction drawShape(container, context, particle, radius, opacity, delta) {\n    if (!particle.shape) {\n        return;\n    }\n    const drawer = container.drawers.get(particle.shape);\n    if (!drawer) {\n        return;\n    }\n    drawer.draw(context, particle, radius, opacity, delta, container.retina.pixelRatio);\n}\nexports.drawShape = drawShape;\nfunction drawShapeAfterEffect(container, context, particle, radius, opacity, delta) {\n    if (!particle.shape) {\n        return;\n    }\n    const drawer = container.drawers.get(particle.shape);\n    if (!(drawer === null || drawer === void 0 ? void 0 : drawer.afterEffect)) {\n        return;\n    }\n    drawer.afterEffect(context, particle, radius, opacity, delta, container.retina.pixelRatio);\n}\nexports.drawShapeAfterEffect = drawShapeAfterEffect;\nfunction drawPlugin(context, plugin, delta) {\n    if (!plugin.draw) {\n        return;\n    }\n    context.save();\n    plugin.draw(context, delta);\n    context.restore();\n}\nexports.drawPlugin = drawPlugin;\nfunction drawParticlePlugin(context, plugin, particle, delta) {\n    if (plugin.drawParticle !== undefined) {\n        context.save();\n        plugin.drawParticle(context, particle, delta);\n        context.restore();\n    }\n}\nexports.drawParticlePlugin = drawParticlePlugin;\nfunction drawEllipse(context, particle, fillColorValue, radius, opacity, width, rotation, start, end) {\n    const pos = particle.getPosition();\n    if (fillColorValue) {\n        context.strokeStyle = (0, ColorUtils_1.getStyleFromHsl)(fillColorValue, opacity);\n    }\n    if (width === 0) {\n        return;\n    }\n    context.lineWidth = width;\n    const rotationRadian = (rotation * Math.PI) / 180;\n    context.beginPath();\n    context.ellipse(pos.x, pos.y, radius / 2, radius * 2, rotationRadian, start, end);\n    context.stroke();\n}\nexports.drawEllipse = drawEllipse;\nfunction alterHsl(color, type, value) {\n    return {\n        h: color.h,\n        s: color.s,\n        l: color.l + (type === Enums_1.AlterType.darken ? -1 : 1) * value,\n    };\n}\nexports.alterHsl = alterHsl;\n"]},"metadata":{},"sourceType":"script"}