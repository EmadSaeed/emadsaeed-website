{"ast":null,"code":"\"use strict\";\n\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\n\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\n\nvar _ImageDrawer_images;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ImageDrawer = void 0;\n\nconst Utils_1 = require(\"../../Utils\");\n\nconst Enums_1 = require(\"../../Enums\");\n\nconst Utils_2 = require(\"./Utils\");\n\nclass ImageDrawer {\n  constructor() {\n    _ImageDrawer_images.set(this, void 0);\n\n    __classPrivateFieldSet(this, _ImageDrawer_images, [], \"f\");\n  }\n\n  getSidesCount() {\n    return 12;\n  }\n\n  getImages(container) {\n    const containerImages = __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").find(t => t.id === container.id);\n\n    if (!containerImages) {\n      __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").push({\n        id: container.id,\n        images: []\n      });\n\n      return this.getImages(container);\n    } else {\n      return containerImages;\n    }\n  }\n\n  addImage(container, image) {\n    const containerImages = this.getImages(container);\n    containerImages === null || containerImages === void 0 ? void 0 : containerImages.images.push(image);\n  }\n\n  async init(container) {\n    await this.loadImagesFromParticlesOptions(container, container.actualOptions.particles);\n    await this.loadImagesFromParticlesOptions(container, container.actualOptions.interactivity.modes.trail.particles);\n\n    for (const manualParticle of container.actualOptions.manualParticles) {\n      await this.loadImagesFromParticlesOptions(container, manualParticle.options);\n    }\n\n    const emitterOptions = container.actualOptions;\n\n    if (emitterOptions.emitters) {\n      if (emitterOptions.emitters instanceof Array) {\n        for (const emitter of emitterOptions.emitters) {\n          await this.loadImagesFromParticlesOptions(container, emitter.particles);\n        }\n      } else {\n        await this.loadImagesFromParticlesOptions(container, emitterOptions.emitters.particles);\n      }\n    }\n\n    const interactiveEmitters = emitterOptions.interactivity.modes.emitters;\n\n    if (interactiveEmitters) {\n      if (interactiveEmitters instanceof Array) {\n        for (const emitter of interactiveEmitters) {\n          await this.loadImagesFromParticlesOptions(container, emitter.particles);\n        }\n      } else {\n        await this.loadImagesFromParticlesOptions(container, interactiveEmitters.particles);\n      }\n    }\n  }\n\n  destroy() {\n    __classPrivateFieldSet(this, _ImageDrawer_images, [], \"f\");\n  }\n\n  async loadImagesFromParticlesOptions(container, options) {\n    var _a, _b, _c;\n\n    const shapeOptions = options === null || options === void 0 ? void 0 : options.shape;\n\n    if (!(shapeOptions === null || shapeOptions === void 0 ? void 0 : shapeOptions.type) || !shapeOptions.options || !(0, Utils_1.isInArray)(Enums_1.ShapeType.image, shapeOptions.type) && !(0, Utils_1.isInArray)(Enums_1.ShapeType.images, shapeOptions.type)) {\n      return;\n    }\n\n    const idx = __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").findIndex(t => t.id === container.id);\n\n    if (idx >= 0) {\n      __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").splice(idx, 1);\n    }\n\n    const imageOptions = (_a = shapeOptions.options[Enums_1.ShapeType.images]) !== null && _a !== void 0 ? _a : shapeOptions.options[Enums_1.ShapeType.image];\n\n    if (imageOptions instanceof Array) {\n      for (const optionsImage of imageOptions) {\n        await this.loadImageShape(container, optionsImage);\n      }\n    } else {\n      await this.loadImageShape(container, imageOptions);\n    }\n\n    if (options === null || options === void 0 ? void 0 : options.groups) {\n      for (const groupName in options.groups) {\n        const group = options.groups[groupName];\n        await this.loadImagesFromParticlesOptions(container, group);\n      }\n    }\n\n    if ((_c = (_b = options === null || options === void 0 ? void 0 : options.destroy) === null || _b === void 0 ? void 0 : _b.split) === null || _c === void 0 ? void 0 : _c.particles) {\n      await this.loadImagesFromParticlesOptions(container, options === null || options === void 0 ? void 0 : options.destroy.split.particles);\n    }\n  }\n\n  async loadImageShape(container, imageShape) {\n    try {\n      const imageFunc = imageShape.replaceColor ? Utils_2.downloadSvgImage : Utils_2.loadImage;\n      const image = await imageFunc(imageShape.src);\n\n      if (image) {\n        this.addImage(container, image);\n      }\n    } catch (_a) {\n      console.warn(`tsParticles error - ${imageShape.src} not found`);\n    }\n  }\n\n  draw(context, particle, radius, opacity) {\n    var _a, _b;\n\n    if (!context) {\n      return;\n    }\n\n    const image = particle.image;\n    const element = (_a = image === null || image === void 0 ? void 0 : image.data) === null || _a === void 0 ? void 0 : _a.element;\n\n    if (!element) {\n      return;\n    }\n\n    const ratio = (_b = image === null || image === void 0 ? void 0 : image.ratio) !== null && _b !== void 0 ? _b : 1;\n    const pos = {\n      x: -radius,\n      y: -radius\n    };\n\n    if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n      context.globalAlpha = opacity;\n    }\n\n    context.drawImage(element, pos.x, pos.y, radius * 2, radius * 2 / ratio);\n\n    if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n      context.globalAlpha = 1;\n    }\n  }\n\n  loadShape(particle) {\n    var _a, _b, _c, _d, _e, _f, _g;\n\n    if (particle.shape !== \"image\" && particle.shape !== \"images\") {\n      return;\n    }\n\n    const images = this.getImages(particle.container).images;\n    const imageData = particle.shapeData;\n    const image = (_a = images.find(t => t.source === imageData.src)) !== null && _a !== void 0 ? _a : images[0];\n    const color = particle.getFillColor();\n    let imageRes;\n\n    if (!image) {\n      return;\n    }\n\n    if (image.svgData !== undefined && imageData.replaceColor && color) {\n      const svgColoredData = (0, Utils_2.replaceColorSvg)(image, color, (_c = (_b = particle.opacity) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : 1);\n      const svg = new Blob([svgColoredData], {\n        type: \"image/svg+xml\"\n      });\n      const domUrl = URL || window.URL || window.webkitURL || window;\n      const url = domUrl.createObjectURL(svg);\n      const img = new Image();\n      imageRes = {\n        data: Object.assign(Object.assign({}, image), {\n          svgData: svgColoredData\n        }),\n        ratio: imageData.width / imageData.height,\n        replaceColor: (_d = imageData.replaceColor) !== null && _d !== void 0 ? _d : imageData.replace_color,\n        source: imageData.src\n      };\n      img.addEventListener(\"load\", () => {\n        const pImage = particle.image;\n\n        if (pImage) {\n          pImage.loaded = true;\n          image.element = img;\n        }\n\n        domUrl.revokeObjectURL(url);\n      });\n      img.addEventListener(\"error\", () => {\n        domUrl.revokeObjectURL(url);\n        (0, Utils_2.loadImage)(imageData.src).then(img2 => {\n          const pImage = particle.image;\n\n          if (pImage) {\n            image.element = img2 === null || img2 === void 0 ? void 0 : img2.element;\n            pImage.loaded = true;\n          }\n        });\n      });\n      img.src = url;\n    } else {\n      imageRes = {\n        data: image,\n        loaded: true,\n        ratio: imageData.width / imageData.height,\n        replaceColor: (_e = imageData.replaceColor) !== null && _e !== void 0 ? _e : imageData.replace_color,\n        source: imageData.src\n      };\n    }\n\n    if (!imageRes.ratio) {\n      imageRes.ratio = 1;\n    }\n\n    const fill = (_f = imageData.fill) !== null && _f !== void 0 ? _f : particle.fill;\n    const close = (_g = imageData.close) !== null && _g !== void 0 ? _g : particle.close;\n    const imageShape = {\n      image: imageRes,\n      fill,\n      close\n    };\n    particle.image = imageShape.image;\n    particle.fill = imageShape.fill;\n    particle.close = imageShape.close;\n  }\n\n}\n\nexports.ImageDrawer = ImageDrawer;\n_ImageDrawer_images = new WeakMap();","map":{"version":3,"sources":["/Users/emad/Desktop/emadsaeed.com/client/node_modules/tsparticles/Shapes/Image/ImageDrawer.js"],"names":["__classPrivateFieldSet","receiver","state","value","kind","f","TypeError","has","call","set","__classPrivateFieldGet","get","_ImageDrawer_images","Object","defineProperty","exports","ImageDrawer","Utils_1","require","Enums_1","Utils_2","constructor","getSidesCount","getImages","container","containerImages","find","t","id","push","images","addImage","image","init","loadImagesFromParticlesOptions","actualOptions","particles","interactivity","modes","trail","manualParticle","manualParticles","options","emitterOptions","emitters","Array","emitter","interactiveEmitters","destroy","_a","_b","_c","shapeOptions","shape","type","isInArray","ShapeType","idx","findIndex","splice","imageOptions","optionsImage","loadImageShape","groups","groupName","group","split","imageShape","imageFunc","replaceColor","downloadSvgImage","loadImage","src","console","warn","draw","context","particle","radius","opacity","element","data","ratio","pos","x","y","svgData","globalAlpha","drawImage","loadShape","_d","_e","_f","_g","imageData","shapeData","source","color","getFillColor","imageRes","undefined","svgColoredData","replaceColorSvg","svg","Blob","domUrl","URL","window","webkitURL","url","createObjectURL","img","Image","assign","width","height","replace_color","addEventListener","pImage","loaded","revokeObjectURL","then","img2","fill","close","WeakMap"],"mappings":"AAAA;;AACA,IAAIA,sBAAsB,GAAI,QAAQ,KAAKA,sBAAd,IAAyC,UAAUC,QAAV,EAAoBC,KAApB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwCC,CAAxC,EAA2C;AAC7G,MAAID,IAAI,KAAK,GAAb,EAAkB,MAAM,IAAIE,SAAJ,CAAc,gCAAd,CAAN;AAClB,MAAIF,IAAI,KAAK,GAAT,IAAgB,CAACC,CAArB,EAAwB,MAAM,IAAIC,SAAJ,CAAc,+CAAd,CAAN;AACxB,MAAI,OAAOJ,KAAP,KAAiB,UAAjB,GAA8BD,QAAQ,KAAKC,KAAb,IAAsB,CAACG,CAArD,GAAyD,CAACH,KAAK,CAACK,GAAN,CAAUN,QAAV,CAA9D,EAAmF,MAAM,IAAIK,SAAJ,CAAc,yEAAd,CAAN;AACnF,SAAQF,IAAI,KAAK,GAAT,GAAeC,CAAC,CAACG,IAAF,CAAOP,QAAP,EAAiBE,KAAjB,CAAf,GAAyCE,CAAC,GAAGA,CAAC,CAACF,KAAF,GAAUA,KAAb,GAAqBD,KAAK,CAACO,GAAN,CAAUR,QAAV,EAAoBE,KAApB,CAAhE,EAA6FA,KAApG;AACH,CALD;;AAMA,IAAIO,sBAAsB,GAAI,QAAQ,KAAKA,sBAAd,IAAyC,UAAUT,QAAV,EAAoBC,KAApB,EAA2BE,IAA3B,EAAiCC,CAAjC,EAAoC;AACtG,MAAID,IAAI,KAAK,GAAT,IAAgB,CAACC,CAArB,EAAwB,MAAM,IAAIC,SAAJ,CAAc,+CAAd,CAAN;AACxB,MAAI,OAAOJ,KAAP,KAAiB,UAAjB,GAA8BD,QAAQ,KAAKC,KAAb,IAAsB,CAACG,CAArD,GAAyD,CAACH,KAAK,CAACK,GAAN,CAAUN,QAAV,CAA9D,EAAmF,MAAM,IAAIK,SAAJ,CAAc,0EAAd,CAAN;AACnF,SAAOF,IAAI,KAAK,GAAT,GAAeC,CAAf,GAAmBD,IAAI,KAAK,GAAT,GAAeC,CAAC,CAACG,IAAF,CAAOP,QAAP,CAAf,GAAkCI,CAAC,GAAGA,CAAC,CAACF,KAAL,GAAaD,KAAK,CAACS,GAAN,CAAUV,QAAV,CAA1E;AACH,CAJD;;AAKA,IAAIW,mBAAJ;;AACAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEZ,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAY,OAAO,CAACC,WAAR,GAAsB,KAAK,CAA3B;;AACA,MAAMC,OAAO,GAAGC,OAAO,CAAC,aAAD,CAAvB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,aAAD,CAAvB;;AACA,MAAME,OAAO,GAAGF,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMF,WAAN,CAAkB;AACdK,EAAAA,WAAW,GAAG;AACVT,IAAAA,mBAAmB,CAACH,GAApB,CAAwB,IAAxB,EAA8B,KAAK,CAAnC;;AACAT,IAAAA,sBAAsB,CAAC,IAAD,EAAOY,mBAAP,EAA4B,EAA5B,EAAgC,GAAhC,CAAtB;AACH;;AACDU,EAAAA,aAAa,GAAG;AACZ,WAAO,EAAP;AACH;;AACDC,EAAAA,SAAS,CAACC,SAAD,EAAY;AACjB,UAAMC,eAAe,GAAGf,sBAAsB,CAAC,IAAD,EAAOE,mBAAP,EAA4B,GAA5B,CAAtB,CAAuDc,IAAvD,CAA6DC,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASJ,SAAS,CAACI,EAAtF,CAAxB;;AACA,QAAI,CAACH,eAAL,EAAsB;AAClBf,MAAAA,sBAAsB,CAAC,IAAD,EAAOE,mBAAP,EAA4B,GAA5B,CAAtB,CAAuDiB,IAAvD,CAA4D;AACxDD,QAAAA,EAAE,EAAEJ,SAAS,CAACI,EAD0C;AAExDE,QAAAA,MAAM,EAAE;AAFgD,OAA5D;;AAIA,aAAO,KAAKP,SAAL,CAAeC,SAAf,CAAP;AACH,KAND,MAOK;AACD,aAAOC,eAAP;AACH;AACJ;;AACDM,EAAAA,QAAQ,CAACP,SAAD,EAAYQ,KAAZ,EAAmB;AACvB,UAAMP,eAAe,GAAG,KAAKF,SAAL,CAAeC,SAAf,CAAxB;AACAC,IAAAA,eAAe,KAAK,IAApB,IAA4BA,eAAe,KAAK,KAAK,CAArD,GAAyD,KAAK,CAA9D,GAAkEA,eAAe,CAACK,MAAhB,CAAuBD,IAAvB,CAA4BG,KAA5B,CAAlE;AACH;;AACS,QAAJC,IAAI,CAACT,SAAD,EAAY;AAClB,UAAM,KAAKU,8BAAL,CAAoCV,SAApC,EAA+CA,SAAS,CAACW,aAAV,CAAwBC,SAAvE,CAAN;AACA,UAAM,KAAKF,8BAAL,CAAoCV,SAApC,EAA+CA,SAAS,CAACW,aAAV,CAAwBE,aAAxB,CAAsCC,KAAtC,CAA4CC,KAA5C,CAAkDH,SAAjG,CAAN;;AACA,SAAK,MAAMI,cAAX,IAA6BhB,SAAS,CAACW,aAAV,CAAwBM,eAArD,EAAsE;AAClE,YAAM,KAAKP,8BAAL,CAAoCV,SAApC,EAA+CgB,cAAc,CAACE,OAA9D,CAAN;AACH;;AACD,UAAMC,cAAc,GAAGnB,SAAS,CAACW,aAAjC;;AACA,QAAIQ,cAAc,CAACC,QAAnB,EAA6B;AACzB,UAAID,cAAc,CAACC,QAAf,YAAmCC,KAAvC,EAA8C;AAC1C,aAAK,MAAMC,OAAX,IAAsBH,cAAc,CAACC,QAArC,EAA+C;AAC3C,gBAAM,KAAKV,8BAAL,CAAoCV,SAApC,EAA+CsB,OAAO,CAACV,SAAvD,CAAN;AACH;AACJ,OAJD,MAKK;AACD,cAAM,KAAKF,8BAAL,CAAoCV,SAApC,EAA+CmB,cAAc,CAACC,QAAf,CAAwBR,SAAvE,CAAN;AACH;AACJ;;AACD,UAAMW,mBAAmB,GAAGJ,cAAc,CAACN,aAAf,CAA6BC,KAA7B,CAAmCM,QAA/D;;AACA,QAAIG,mBAAJ,EAAyB;AACrB,UAAIA,mBAAmB,YAAYF,KAAnC,EAA0C;AACtC,aAAK,MAAMC,OAAX,IAAsBC,mBAAtB,EAA2C;AACvC,gBAAM,KAAKb,8BAAL,CAAoCV,SAApC,EAA+CsB,OAAO,CAACV,SAAvD,CAAN;AACH;AACJ,OAJD,MAKK;AACD,cAAM,KAAKF,8BAAL,CAAoCV,SAApC,EAA+CuB,mBAAmB,CAACX,SAAnE,CAAN;AACH;AACJ;AACJ;;AACDY,EAAAA,OAAO,GAAG;AACNhD,IAAAA,sBAAsB,CAAC,IAAD,EAAOY,mBAAP,EAA4B,EAA5B,EAAgC,GAAhC,CAAtB;AACH;;AACmC,QAA9BsB,8BAA8B,CAACV,SAAD,EAAYkB,OAAZ,EAAqB;AACrD,QAAIO,EAAJ,EAAQC,EAAR,EAAYC,EAAZ;;AACA,UAAMC,YAAY,GAAGV,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACW,KAA/E;;AACA,QAAI,EAAED,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,KAAK,CAA/C,GAAmD,KAAK,CAAxD,GAA4DA,YAAY,CAACE,IAA3E,KACA,CAACF,YAAY,CAACV,OADd,IAEC,CAAC,CAAC,GAAGzB,OAAO,CAACsC,SAAZ,EAAuBpC,OAAO,CAACqC,SAAR,CAAkBxB,KAAzC,EAAgDoB,YAAY,CAACE,IAA7D,CAAD,IAAuE,CAAC,CAAC,GAAGrC,OAAO,CAACsC,SAAZ,EAAuBpC,OAAO,CAACqC,SAAR,CAAkB1B,MAAzC,EAAiDsB,YAAY,CAACE,IAA9D,CAF7E,EAEmJ;AAC/I;AACH;;AACD,UAAMG,GAAG,GAAG/C,sBAAsB,CAAC,IAAD,EAAOE,mBAAP,EAA4B,GAA5B,CAAtB,CAAuD8C,SAAvD,CAAkE/B,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASJ,SAAS,CAACI,EAA3F,CAAZ;;AACA,QAAI6B,GAAG,IAAI,CAAX,EAAc;AACV/C,MAAAA,sBAAsB,CAAC,IAAD,EAAOE,mBAAP,EAA4B,GAA5B,CAAtB,CAAuD+C,MAAvD,CAA8DF,GAA9D,EAAmE,CAAnE;AACH;;AACD,UAAMG,YAAY,GAAG,CAACX,EAAE,GAAGG,YAAY,CAACV,OAAb,CAAqBvB,OAAO,CAACqC,SAAR,CAAkB1B,MAAvC,CAAN,MAA0D,IAA1D,IAAkEmB,EAAE,KAAK,KAAK,CAA9E,GAAkFA,EAAlF,GAAuFG,YAAY,CAACV,OAAb,CAAqBvB,OAAO,CAACqC,SAAR,CAAkBxB,KAAvC,CAA5G;;AACA,QAAI4B,YAAY,YAAYf,KAA5B,EAAmC;AAC/B,WAAK,MAAMgB,YAAX,IAA2BD,YAA3B,EAAyC;AACrC,cAAM,KAAKE,cAAL,CAAoBtC,SAApB,EAA+BqC,YAA/B,CAAN;AACH;AACJ,KAJD,MAKK;AACD,YAAM,KAAKC,cAAL,CAAoBtC,SAApB,EAA+BoC,YAA/B,CAAN;AACH;;AACD,QAAIlB,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACqB,MAA9D,EAAsE;AAClE,WAAK,MAAMC,SAAX,IAAwBtB,OAAO,CAACqB,MAAhC,EAAwC;AACpC,cAAME,KAAK,GAAGvB,OAAO,CAACqB,MAAR,CAAeC,SAAf,CAAd;AACA,cAAM,KAAK9B,8BAAL,CAAoCV,SAApC,EAA+CyC,KAA/C,CAAN;AACH;AACJ;;AACD,QAAI,CAACd,EAAE,GAAG,CAACD,EAAE,GAAGR,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACM,OAAhE,MAA6E,IAA7E,IAAqFE,EAAE,KAAK,KAAK,CAAjG,GAAqG,KAAK,CAA1G,GAA8GA,EAAE,CAACgB,KAAvH,MAAkI,IAAlI,IAA0If,EAAE,KAAK,KAAK,CAAtJ,GAA0J,KAAK,CAA/J,GAAmKA,EAAE,CAACf,SAA1K,EAAqL;AACjL,YAAM,KAAKF,8BAAL,CAAoCV,SAApC,EAA+CkB,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACM,OAAR,CAAgBkB,KAAhB,CAAsB9B,SAAvH,CAAN;AACH;AACJ;;AACmB,QAAd0B,cAAc,CAACtC,SAAD,EAAY2C,UAAZ,EAAwB;AACxC,QAAI;AACA,YAAMC,SAAS,GAAGD,UAAU,CAACE,YAAX,GAA0BjD,OAAO,CAACkD,gBAAlC,GAAqDlD,OAAO,CAACmD,SAA/E;AACA,YAAMvC,KAAK,GAAG,MAAMoC,SAAS,CAACD,UAAU,CAACK,GAAZ,CAA7B;;AACA,UAAIxC,KAAJ,EAAW;AACP,aAAKD,QAAL,CAAcP,SAAd,EAAyBQ,KAAzB;AACH;AACJ,KAND,CAOA,OAAOiB,EAAP,EAAW;AACPwB,MAAAA,OAAO,CAACC,IAAR,CAAc,uBAAsBP,UAAU,CAACK,GAAI,YAAnD;AACH;AACJ;;AACDG,EAAAA,IAAI,CAACC,OAAD,EAAUC,QAAV,EAAoBC,MAApB,EAA4BC,OAA5B,EAAqC;AACrC,QAAI9B,EAAJ,EAAQC,EAAR;;AACA,QAAI,CAAC0B,OAAL,EAAc;AACV;AACH;;AACD,UAAM5C,KAAK,GAAG6C,QAAQ,CAAC7C,KAAvB;AACA,UAAMgD,OAAO,GAAG,CAAC/B,EAAE,GAAGjB,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACiD,IAA1D,MAAoE,IAApE,IAA4EhC,EAAE,KAAK,KAAK,CAAxF,GAA4F,KAAK,CAAjG,GAAqGA,EAAE,CAAC+B,OAAxH;;AACA,QAAI,CAACA,OAAL,EAAc;AACV;AACH;;AACD,UAAME,KAAK,GAAG,CAAChC,EAAE,GAAGlB,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACkD,KAA1D,MAAqE,IAArE,IAA6EhC,EAAE,KAAK,KAAK,CAAzF,GAA6FA,EAA7F,GAAkG,CAAhH;AACA,UAAMiC,GAAG,GAAG;AACRC,MAAAA,CAAC,EAAE,CAACN,MADI;AAERO,MAAAA,CAAC,EAAE,CAACP;AAFI,KAAZ;;AAIA,QAAI,EAAE9C,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACiD,IAAN,CAAWK,OAA3D,KAAuE,EAAEtD,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACqC,YAAtD,CAA3E,EAAgJ;AAC5IO,MAAAA,OAAO,CAACW,WAAR,GAAsBR,OAAtB;AACH;;AACDH,IAAAA,OAAO,CAACY,SAAR,CAAkBR,OAAlB,EAA2BG,GAAG,CAACC,CAA/B,EAAkCD,GAAG,CAACE,CAAtC,EAAyCP,MAAM,GAAG,CAAlD,EAAsDA,MAAM,GAAG,CAAV,GAAeI,KAApE;;AACA,QAAI,EAAElD,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACiD,IAAN,CAAWK,OAA3D,KAAuE,EAAEtD,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACqC,YAAtD,CAA3E,EAAgJ;AAC5IO,MAAAA,OAAO,CAACW,WAAR,GAAsB,CAAtB;AACH;AACJ;;AACDE,EAAAA,SAAS,CAACZ,QAAD,EAAW;AAChB,QAAI5B,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBuC,EAAhB,EAAoBC,EAApB,EAAwBC,EAAxB,EAA4BC,EAA5B;;AACA,QAAIhB,QAAQ,CAACxB,KAAT,KAAmB,OAAnB,IAA8BwB,QAAQ,CAACxB,KAAT,KAAmB,QAArD,EAA+D;AAC3D;AACH;;AACD,UAAMvB,MAAM,GAAG,KAAKP,SAAL,CAAesD,QAAQ,CAACrD,SAAxB,EAAmCM,MAAlD;AACA,UAAMgE,SAAS,GAAGjB,QAAQ,CAACkB,SAA3B;AACA,UAAM/D,KAAK,GAAG,CAACiB,EAAE,GAAGnB,MAAM,CAACJ,IAAP,CAAaC,CAAD,IAAOA,CAAC,CAACqE,MAAF,KAAaF,SAAS,CAACtB,GAA1C,CAAN,MAA0D,IAA1D,IAAkEvB,EAAE,KAAK,KAAK,CAA9E,GAAkFA,EAAlF,GAAuFnB,MAAM,CAAC,CAAD,CAA3G;AACA,UAAMmE,KAAK,GAAGpB,QAAQ,CAACqB,YAAT,EAAd;AACA,QAAIC,QAAJ;;AACA,QAAI,CAACnE,KAAL,EAAY;AACR;AACH;;AACD,QAAIA,KAAK,CAACsD,OAAN,KAAkBc,SAAlB,IAA+BN,SAAS,CAACzB,YAAzC,IAAyD4B,KAA7D,EAAoE;AAChE,YAAMI,cAAc,GAAG,CAAC,GAAGjF,OAAO,CAACkF,eAAZ,EAA6BtE,KAA7B,EAAoCiE,KAApC,EAA2C,CAAC9C,EAAE,GAAG,CAACD,EAAE,GAAG2B,QAAQ,CAACE,OAAf,MAA4B,IAA5B,IAAoC7B,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAAC/C,KAAtE,MAAiF,IAAjF,IAAyFgD,EAAE,KAAK,KAAK,CAArG,GAAyGA,EAAzG,GAA8G,CAAzJ,CAAvB;AACA,YAAMoD,GAAG,GAAG,IAAIC,IAAJ,CAAS,CAACH,cAAD,CAAT,EAA2B;AAAE/C,QAAAA,IAAI,EAAE;AAAR,OAA3B,CAAZ;AACA,YAAMmD,MAAM,GAAGC,GAAG,IAAIC,MAAM,CAACD,GAAd,IAAqBC,MAAM,CAACC,SAA5B,IAAyCD,MAAxD;AACA,YAAME,GAAG,GAAGJ,MAAM,CAACK,eAAP,CAAuBP,GAAvB,CAAZ;AACA,YAAMQ,GAAG,GAAG,IAAIC,KAAJ,EAAZ;AACAb,MAAAA,QAAQ,GAAG;AACPlB,QAAAA,IAAI,EAAEpE,MAAM,CAACoG,MAAP,CAAcpG,MAAM,CAACoG,MAAP,CAAc,EAAd,EAAkBjF,KAAlB,CAAd,EAAwC;AAAEsD,UAAAA,OAAO,EAAEe;AAAX,SAAxC,CADC;AAEPnB,QAAAA,KAAK,EAAEY,SAAS,CAACoB,KAAV,GAAkBpB,SAAS,CAACqB,MAF5B;AAGP9C,QAAAA,YAAY,EAAE,CAACqB,EAAE,GAAGI,SAAS,CAACzB,YAAhB,MAAkC,IAAlC,IAA0CqB,EAAE,KAAK,KAAK,CAAtD,GAA0DA,EAA1D,GAA+DI,SAAS,CAACsB,aAHhF;AAIPpB,QAAAA,MAAM,EAAEF,SAAS,CAACtB;AAJX,OAAX;AAMAuC,MAAAA,GAAG,CAACM,gBAAJ,CAAqB,MAArB,EAA6B,MAAM;AAC/B,cAAMC,MAAM,GAAGzC,QAAQ,CAAC7C,KAAxB;;AACA,YAAIsF,MAAJ,EAAY;AACRA,UAAAA,MAAM,CAACC,MAAP,GAAgB,IAAhB;AACAvF,UAAAA,KAAK,CAACgD,OAAN,GAAgB+B,GAAhB;AACH;;AACDN,QAAAA,MAAM,CAACe,eAAP,CAAuBX,GAAvB;AACH,OAPD;AAQAE,MAAAA,GAAG,CAACM,gBAAJ,CAAqB,OAArB,EAA8B,MAAM;AAChCZ,QAAAA,MAAM,CAACe,eAAP,CAAuBX,GAAvB;AACA,SAAC,GAAGzF,OAAO,CAACmD,SAAZ,EAAuBuB,SAAS,CAACtB,GAAjC,EAAsCiD,IAAtC,CAA4CC,IAAD,IAAU;AACjD,gBAAMJ,MAAM,GAAGzC,QAAQ,CAAC7C,KAAxB;;AACA,cAAIsF,MAAJ,EAAY;AACRtF,YAAAA,KAAK,CAACgD,OAAN,GAAgB0C,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAAC1C,OAAjE;AACAsC,YAAAA,MAAM,CAACC,MAAP,GAAgB,IAAhB;AACH;AACJ,SAND;AAOH,OATD;AAUAR,MAAAA,GAAG,CAACvC,GAAJ,GAAUqC,GAAV;AACH,KA/BD,MAgCK;AACDV,MAAAA,QAAQ,GAAG;AACPlB,QAAAA,IAAI,EAAEjD,KADC;AAEPuF,QAAAA,MAAM,EAAE,IAFD;AAGPrC,QAAAA,KAAK,EAAEY,SAAS,CAACoB,KAAV,GAAkBpB,SAAS,CAACqB,MAH5B;AAIP9C,QAAAA,YAAY,EAAE,CAACsB,EAAE,GAAGG,SAAS,CAACzB,YAAhB,MAAkC,IAAlC,IAA0CsB,EAAE,KAAK,KAAK,CAAtD,GAA0DA,EAA1D,GAA+DG,SAAS,CAACsB,aAJhF;AAKPpB,QAAAA,MAAM,EAAEF,SAAS,CAACtB;AALX,OAAX;AAOH;;AACD,QAAI,CAAC2B,QAAQ,CAACjB,KAAd,EAAqB;AACjBiB,MAAAA,QAAQ,CAACjB,KAAT,GAAiB,CAAjB;AACH;;AACD,UAAMyC,IAAI,GAAG,CAAC/B,EAAE,GAAGE,SAAS,CAAC6B,IAAhB,MAA0B,IAA1B,IAAkC/B,EAAE,KAAK,KAAK,CAA9C,GAAkDA,EAAlD,GAAuDf,QAAQ,CAAC8C,IAA7E;AACA,UAAMC,KAAK,GAAG,CAAC/B,EAAE,GAAGC,SAAS,CAAC8B,KAAhB,MAA2B,IAA3B,IAAmC/B,EAAE,KAAK,KAAK,CAA/C,GAAmDA,EAAnD,GAAwDhB,QAAQ,CAAC+C,KAA/E;AACA,UAAMzD,UAAU,GAAG;AACfnC,MAAAA,KAAK,EAAEmE,QADQ;AAEfwB,MAAAA,IAFe;AAGfC,MAAAA;AAHe,KAAnB;AAKA/C,IAAAA,QAAQ,CAAC7C,KAAT,GAAiBmC,UAAU,CAACnC,KAA5B;AACA6C,IAAAA,QAAQ,CAAC8C,IAAT,GAAgBxD,UAAU,CAACwD,IAA3B;AACA9C,IAAAA,QAAQ,CAAC+C,KAAT,GAAiBzD,UAAU,CAACyD,KAA5B;AACH;;AA9La;;AAgMlB7G,OAAO,CAACC,WAAR,GAAsBA,WAAtB;AACAJ,mBAAmB,GAAG,IAAIiH,OAAJ,EAAtB","sourcesContent":["\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ImageDrawer_images;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImageDrawer = void 0;\nconst Utils_1 = require(\"../../Utils\");\nconst Enums_1 = require(\"../../Enums\");\nconst Utils_2 = require(\"./Utils\");\nclass ImageDrawer {\n    constructor() {\n        _ImageDrawer_images.set(this, void 0);\n        __classPrivateFieldSet(this, _ImageDrawer_images, [], \"f\");\n    }\n    getSidesCount() {\n        return 12;\n    }\n    getImages(container) {\n        const containerImages = __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").find((t) => t.id === container.id);\n        if (!containerImages) {\n            __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").push({\n                id: container.id,\n                images: [],\n            });\n            return this.getImages(container);\n        }\n        else {\n            return containerImages;\n        }\n    }\n    addImage(container, image) {\n        const containerImages = this.getImages(container);\n        containerImages === null || containerImages === void 0 ? void 0 : containerImages.images.push(image);\n    }\n    async init(container) {\n        await this.loadImagesFromParticlesOptions(container, container.actualOptions.particles);\n        await this.loadImagesFromParticlesOptions(container, container.actualOptions.interactivity.modes.trail.particles);\n        for (const manualParticle of container.actualOptions.manualParticles) {\n            await this.loadImagesFromParticlesOptions(container, manualParticle.options);\n        }\n        const emitterOptions = container.actualOptions;\n        if (emitterOptions.emitters) {\n            if (emitterOptions.emitters instanceof Array) {\n                for (const emitter of emitterOptions.emitters) {\n                    await this.loadImagesFromParticlesOptions(container, emitter.particles);\n                }\n            }\n            else {\n                await this.loadImagesFromParticlesOptions(container, emitterOptions.emitters.particles);\n            }\n        }\n        const interactiveEmitters = emitterOptions.interactivity.modes.emitters;\n        if (interactiveEmitters) {\n            if (interactiveEmitters instanceof Array) {\n                for (const emitter of interactiveEmitters) {\n                    await this.loadImagesFromParticlesOptions(container, emitter.particles);\n                }\n            }\n            else {\n                await this.loadImagesFromParticlesOptions(container, interactiveEmitters.particles);\n            }\n        }\n    }\n    destroy() {\n        __classPrivateFieldSet(this, _ImageDrawer_images, [], \"f\");\n    }\n    async loadImagesFromParticlesOptions(container, options) {\n        var _a, _b, _c;\n        const shapeOptions = options === null || options === void 0 ? void 0 : options.shape;\n        if (!(shapeOptions === null || shapeOptions === void 0 ? void 0 : shapeOptions.type) ||\n            !shapeOptions.options ||\n            (!(0, Utils_1.isInArray)(Enums_1.ShapeType.image, shapeOptions.type) && !(0, Utils_1.isInArray)(Enums_1.ShapeType.images, shapeOptions.type))) {\n            return;\n        }\n        const idx = __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").findIndex((t) => t.id === container.id);\n        if (idx >= 0) {\n            __classPrivateFieldGet(this, _ImageDrawer_images, \"f\").splice(idx, 1);\n        }\n        const imageOptions = (_a = shapeOptions.options[Enums_1.ShapeType.images]) !== null && _a !== void 0 ? _a : shapeOptions.options[Enums_1.ShapeType.image];\n        if (imageOptions instanceof Array) {\n            for (const optionsImage of imageOptions) {\n                await this.loadImageShape(container, optionsImage);\n            }\n        }\n        else {\n            await this.loadImageShape(container, imageOptions);\n        }\n        if (options === null || options === void 0 ? void 0 : options.groups) {\n            for (const groupName in options.groups) {\n                const group = options.groups[groupName];\n                await this.loadImagesFromParticlesOptions(container, group);\n            }\n        }\n        if ((_c = (_b = options === null || options === void 0 ? void 0 : options.destroy) === null || _b === void 0 ? void 0 : _b.split) === null || _c === void 0 ? void 0 : _c.particles) {\n            await this.loadImagesFromParticlesOptions(container, options === null || options === void 0 ? void 0 : options.destroy.split.particles);\n        }\n    }\n    async loadImageShape(container, imageShape) {\n        try {\n            const imageFunc = imageShape.replaceColor ? Utils_2.downloadSvgImage : Utils_2.loadImage;\n            const image = await imageFunc(imageShape.src);\n            if (image) {\n                this.addImage(container, image);\n            }\n        }\n        catch (_a) {\n            console.warn(`tsParticles error - ${imageShape.src} not found`);\n        }\n    }\n    draw(context, particle, radius, opacity) {\n        var _a, _b;\n        if (!context) {\n            return;\n        }\n        const image = particle.image;\n        const element = (_a = image === null || image === void 0 ? void 0 : image.data) === null || _a === void 0 ? void 0 : _a.element;\n        if (!element) {\n            return;\n        }\n        const ratio = (_b = image === null || image === void 0 ? void 0 : image.ratio) !== null && _b !== void 0 ? _b : 1;\n        const pos = {\n            x: -radius,\n            y: -radius,\n        };\n        if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n            context.globalAlpha = opacity;\n        }\n        context.drawImage(element, pos.x, pos.y, radius * 2, (radius * 2) / ratio);\n        if (!(image === null || image === void 0 ? void 0 : image.data.svgData) || !(image === null || image === void 0 ? void 0 : image.replaceColor)) {\n            context.globalAlpha = 1;\n        }\n    }\n    loadShape(particle) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (particle.shape !== \"image\" && particle.shape !== \"images\") {\n            return;\n        }\n        const images = this.getImages(particle.container).images;\n        const imageData = particle.shapeData;\n        const image = (_a = images.find((t) => t.source === imageData.src)) !== null && _a !== void 0 ? _a : images[0];\n        const color = particle.getFillColor();\n        let imageRes;\n        if (!image) {\n            return;\n        }\n        if (image.svgData !== undefined && imageData.replaceColor && color) {\n            const svgColoredData = (0, Utils_2.replaceColorSvg)(image, color, (_c = (_b = particle.opacity) === null || _b === void 0 ? void 0 : _b.value) !== null && _c !== void 0 ? _c : 1);\n            const svg = new Blob([svgColoredData], { type: \"image/svg+xml\" });\n            const domUrl = URL || window.URL || window.webkitURL || window;\n            const url = domUrl.createObjectURL(svg);\n            const img = new Image();\n            imageRes = {\n                data: Object.assign(Object.assign({}, image), { svgData: svgColoredData }),\n                ratio: imageData.width / imageData.height,\n                replaceColor: (_d = imageData.replaceColor) !== null && _d !== void 0 ? _d : imageData.replace_color,\n                source: imageData.src,\n            };\n            img.addEventListener(\"load\", () => {\n                const pImage = particle.image;\n                if (pImage) {\n                    pImage.loaded = true;\n                    image.element = img;\n                }\n                domUrl.revokeObjectURL(url);\n            });\n            img.addEventListener(\"error\", () => {\n                domUrl.revokeObjectURL(url);\n                (0, Utils_2.loadImage)(imageData.src).then((img2) => {\n                    const pImage = particle.image;\n                    if (pImage) {\n                        image.element = img2 === null || img2 === void 0 ? void 0 : img2.element;\n                        pImage.loaded = true;\n                    }\n                });\n            });\n            img.src = url;\n        }\n        else {\n            imageRes = {\n                data: image,\n                loaded: true,\n                ratio: imageData.width / imageData.height,\n                replaceColor: (_e = imageData.replaceColor) !== null && _e !== void 0 ? _e : imageData.replace_color,\n                source: imageData.src,\n            };\n        }\n        if (!imageRes.ratio) {\n            imageRes.ratio = 1;\n        }\n        const fill = (_f = imageData.fill) !== null && _f !== void 0 ? _f : particle.fill;\n        const close = (_g = imageData.close) !== null && _g !== void 0 ? _g : particle.close;\n        const imageShape = {\n            image: imageRes,\n            fill,\n            close,\n        };\n        particle.image = imageShape.image;\n        particle.fill = imageShape.fill;\n        particle.close = imageShape.close;\n    }\n}\nexports.ImageDrawer = ImageDrawer;\n_ImageDrawer_images = new WeakMap();\n"]},"metadata":{},"sourceType":"script"}